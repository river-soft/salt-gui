**Инструкция пользователя SaltGUI**
============================

Аутентификация и авторизация
============================

Приступая к работе с SaltGUI, необходимо пройти процедуру авторизации. Для этого
в появившемся окне авторизации необходимо ввести имя пользователя и пароль,
после чего нажать кнопку «АВТОРИЗОВАТЬСЯ» (Рис. 1).

![Рис. 1 — Окно авторизации](media/16810c4114083d2c04c520f27f2dda8d.png)


В том случае, когда имя пользователя и пароль были введены не верно, в нижней
части окна авторизации появится соответствующее уведомление (Рис. 2).

![Рис. 2 — Уведомление пользователя о вводе не верных данных](media/d0b0e69fa1cdf5f647f586809a7938e0.png)

При успешной авторизации будет выполнен переход на главную страницу.

Главная страница
================

В случае успешной авторизации будет открыта главная страница сервиса:

![Рис. 3 — Главная страница SaltGUI](media/95d3cb47be43b1b9c08ac44c519d7757.png)

На главной странице отображается информация о миньонах, которые обратились к
серверу Salt.

Состояния миньонов делится на 4 типа: Принятый (Accepted), Отказанные (Denied),
Не принятые (Unaccepted), Отклоненные (Reject). Жизненный цикл миньона
предоставлен на рисунке 4.

В блоке «Статус» отображается общее количество миньонов, которые находятся в том
или ином состоянии.

В блоке «Группы» отображается общее количество принятых миньонов в каждой из
групп миньонов.

![Рис. 4 — Жизненный цикл миньона](media/365604ac31603dcafcff8fe0a46fb6aa.png)

Во вкладке **«Принятые» (Acepted)** перечислены все принятые миньоны с
информацией о группах в которые они включены. Выполнение скриптов возможно
только у миньонов со статусом Accepted. Принятые миньоны можно удалить, отметив
один или несколько миньонов галочкой в поле «Выбор» и нажав на кнопку «Удалить»
(Delete) с подтверждением действия.

Вкладка **«Отказанные» (Deneid)** содержит перечень миньонов, которые отклонил
сам сервер Salt. В этот перечень попадают те миньоны, которые дублируют уже
принятых миньонов, например, название нового миньона совпадает с уже ранее
принятым миньоном.

Вкладка **«Не принятые» (Unaccepted)** содержит перечень новых миньонов, которые
обратились к северу Salt и прошли проверку на уникальность. Новые миньоны можно
принять для дальнейшей работы или отклонить, если это необходимо. При принятии
миньона обязательным является указание группы, которой будет принадлежать миньон
(подробнее о группах миньонов описано в разделе 3).

![Рис.5 — Вкладка «Не принятые» (Unaccepted)](media/8009ffb7b975be62d39fc20c0ee3d202.png)

Каждый принятый миньон должен состоять хотя бы в одной группе миньонов, поэтому
после нажатия на кнопку «Принять» появится диалоговое окно выбора группы
принадлежания миньона. Один миньон может состоять в нескольких группах, это
предусмотрено для удобвства работы и выбора миньонов при запуске скриптов
(подробнее в разделе «Скрипты»)

![Рис.6 — Диалоговое окно выбора группы миньонов](media/2ff75eff63d836bcc3d80f4cf5496dda.png)

Во вкладке **«Отклоненные» (Rejected)** отображается весь перечень миньонов
когда-либо отклоненных пользователем. Миньона можно удалить аналогично, как и на
вкладке принятые.

Страница «Скрипты»
==================

Управление скриптами — создание, редактирование, удаление, запуск на выполнение
возможно на странице «Скрипты».

![Рис.7 — Страница «Скрипты»](media/82fe08f960d1a4dba7ac00925e49fea7.png)

Навигация по странице:

1.  Редактирование наименования группы скриптов;

2.  Удаление группы — функционал доступен только для группы, в которой не
    содержится ни одного скрипта;

3.  Добавление группы и/или скрипта;

4.  Запуск скрипта на выполнение;

5.  Редактирование скрипта и принадлежность его к группе;

6.  Удаление скрипта.

Добавление скрипта
------------------

Скрипт обязательно должен содержаться в группе. Поэтому при создании нового
скрипта необходимо нажать на кнопку «Добавить группу» (кнопка 3 на рисунке 7).
После указать группу, в которой будет состоять скрипт (указать новую путем ввода
из клавиатуры или выбрать уже существующую с помощью выпадающего списка) (рис.
8). После нажать кнопку «Добавить скрипт» появится окно ввода наименования и
тела скрипта (рис. 9)

![Рис.8 — Добавление группы скрипта и скрипта](media/d9c21b036c5ccd291b0a53b799c2f1ce.png)

![Рис.9 — Добавление скрипта](media/94cea5c7e7be5b91c831d7c1f9da17c7.png)

После нажатия на кнопку «Добавить» появится возможность добавление еще одного
скрипта в эту же группу. Если добавление скриптов окончено, то необходимо
сохранить все внесенные изменения нажатием на кнопку «СОХРАНИТЬ» (Рис. 10)

![Рис.10 — Пример создание группы с несколькими миньонами](media/6dcb68f967a9e5935dd43dbb23d5cf8d.png)

Запуск скрипта
--------------

Из страницы «Скрипты» можно запустить один скрипт на нескольких миньонах. Для
этого необходимо нажать на кнопку «Запустить» (рис. 7 кнопка 6) выбрать один или
несколько миньонов и еще раз нажать кнопку «Запустить»

![Рис.11 — Запуск скрипта](media/5eda95108ab892ba11f340b0d5b34d96.png)

Результаты выполнения скрипта описаны в разделе 5.

Страница «Миньоны»
==================

Подробную информацию о миньонах и принадлежность их к группам можно посмотреть
на странице «Миньоны». Один миньон может принадлежать нескольким группам.

![Рис.12 — Страница «Миньоны»](media/d84eafb31d6afb005956890089ed2c38.png)

Доступная функциональность на странице:

1.  Редактирование имени группы миньонов;

2.  Удаление группы миньонов. После удаления группы миньоны, которые были только
    в этой группе автоматически переместятся в группу по умолчанию;

3.  Добавление группы миньонов

4.  Запуск нескольких скриптов для выбранного миньона;

5.  Редактирование принадлежности миньона к группам (рис. 13).

![Рис.13 — Окно выбора группы для миньона](media/633613a8fec2807bd0ca545af1c0edaa.png)

Запуск скрипта
--------------

Запуск скрипта из страницы «Миньоны» аналогичен функциональности из страницы
«Скрипты», только с той разницей что выбираются скрипты (один или несколько) для
запуска на одном миньоне.

![Рис.14 — Запуск скриптов со страницы «Миньоны»](media/f71ce8e3b5485da6276b96e9d5246c4c.png)

Страница «Работы»
=================

Результаты выполнения запущенных скриптов можно посмотреть на странице «Работы»
- рисунок 15

![Рис.15 — Страница результатов выполнения скриптов](media/43974a49b2adf53dd95e57e7805efd76.png)

В левой части экрана отображается список запущенных ранее скриптов с
аккумулированными результатами по выполнению:

1.  Выполнено;

2.  Не выполнено;

3.  Нет связи с миньоном;

4.  Ожидают выполнения.

По умолчанию этот список содержит все скрипты запущенные за последние 2 часа,
если необходимо посмотреть результаты скриптов запущенных ранее, то нужно
выбрать в фильтре необходимый диапазон (рис. 16)

![Рис.16 — Фильтр по времени запуска скрипотов](media/a170e4f369b181b24aa1cc9e54968320.png)

Подробную информацию о ходе выполнения скрипта на миньоне можно посмотреть,
кликнув на ссылку «(logo)», находящеюсь рядом с именем миньйона (рис. 17).

![Рис.17 — Результат работы скрипта](media/2d611bc9003f49c58005387c972fa181.png)

На вкладках «Не выполнено» и «Нет соединения» предусмотрена функциональность
перезапуска скрипта на тех миньонах на которых скрипт не выполнился (рис. 18 и
19)

![Рис.18 — Вкладка «Не выполнено» с возможностью перезапуска скрипта для выбранных миньонов](media/ee41d55cb4e160520a6eb50bd4b5c892.png)

![Рис.19 — Вкладка «Нет соединения» с возможностью перезапуска скрипта для выбранных миньонов](media/356ba96fe6a846559ee8b16c9ffed42d.png)
